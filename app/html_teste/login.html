{% extends 'base.html' %}

{% block head %}
    <meta name="google-signin-scope" content="profile email">
    <meta name="google-signin-client_id" content="YOUR_CLIENT_ID.apps.googleusercontent.com">
    <script src="https://apis.google.com/js/platform.js" async defer></script>

    <title>Calling Therapies - Login</title>
{% endblock %}


{% block body %}

  <div class="container">

    <h1>Login</h1>
    <hr>




    {% if not current_user.is_authenticated %}


    {% if error %}
    <h3>Usuário não cadastrado ou senha inválida.</h3>
    {% endif %}


        <form action="#" method="POST">

          <div class="form-group col-3">
            <label name="email">E-mail</label>
            <input type="email" name="email" class="form-control" id="email">
          </div>
          <br>
          <div class="form-group col-3">
            <label for="password">Senha</label>
            <input type="password" name="password" class="form-control" id="password">
          </div>
          <br>

          <button type="submit" class="btn btn-outline-light btn-lg bg-primary">Logar</button>

        </form>



        <br>
        <div class="g-signin2" data-onsuccess="onSignIn" data-theme="dark"></div>
    <script>
      function onSignIn(googleUser) {
        // Useful data for your client-side scripts:
        var profile = googleUser.getBasicProfile();
        console.log("ID: " + profile.getId()); // Don't send this directly to your server!
        console.log('Full Name: ' + profile.getName());
        console.log('Given Name: ' + profile.getGivenName());
        console.log('Family Name: ' + profile.getFamilyName());
        console.log("Image URL: " + profile.getImageUrl());
        console.log("Email: " + profile.getEmail());

        // The ID token you need to pass to your backend:
        var id_token = googleUser.getAuthResponse().id_token;
        console.log("ID Token: " + id_token);
      }
    </script>



        <br>
        <div class="form-check">
          <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
          <label class="form-check-label" for="flexCheckDefault">
            Lembrar Senha
          </label>
        </div>

        <br>
        <a href="#">Esqueceu a senha?</a>


      </div>




          {% else %}


          <h3>Bem vindo, {{ current_user.fname }} !</h3>



          <br>
          <a href="{{ url_for('login.change_password', user_email=current_user.email) }}" class="btn btn-outline-light btn-sm bg-primary">Alterar Senha</a>
          <a href="{{ url_for('login.change_data', user_email=current_user.email) }}" class="btn btn-outline-light btn-sm bg-primary">Alterar Dados</a>
          <a href="{{ url_for('login.delete_user', user_email=current_user.email) }}" class="btn btn-outline-dark btn-sm bg-sucess">Excluir Conta</a>


          {% endif %}
          <hr>
      <footer>
        <p>&copy Calling Therapies - 2020</p>
      </footer>
{%  endblock%}